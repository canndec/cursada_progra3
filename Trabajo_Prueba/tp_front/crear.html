<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>trabajo prueba</title>
    <!--<script defer src="main.js"></script> -->
    <link rel="stylesheet" href="css/style.css">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Ver</a></li>
                <li><a href="consultar.html">Consultar</a></li>
                <li><a href="crear.html">Crear</a></li>
                <li><a href="modificar.html">Modificar</a></li>
                <li><a href="eliminar.html">Eliminar</a></li>
            </ul>
        </nav>
    </header>
    <h1>Crear producto</h1>
    
    <!-- Formulario que va a enviar nuestros datos al endpoint /products-->
    <form id="altaProducts-container">
        
        <label for="nameProd">Nombre</label>
        <input type="text" name="nombre" id="nameProd" required>
        
        <label for="categoryProd">Categoria</label>
        <select name="categoria" id="categoryProd" required>
            <option value="food">comida</option>
            <option value="drink">bebida</option>
        </select>
        
        <label for="imageProd">Imagen</label>
        <input type="text" name="imagen" id="imageProd">
        
        <label for="priceProd">Precio</label>
        <input type="number" name="precio" id="priceProd" required>
        
        <input type="submit" value="Crear producto">
    </form>
    <script>
        let altaProducts_conteiner = document.getElementById("altaProducts-container");
        let url = "http://localhost:3000";

        altaProducts_conteiner.addEventListener("submit", async (event) => {
            event.preventDefault();
            let formData = new FormData(event.target); //event.target devuelve el form activo
            let data = Object.fromEntries(formData.entries());
            console.log(data);

            try {
                let response = await fetch(`${url}/productos`,{
                    method:"POST",
                    headers: {
                        "Content-type": "application/json"
                    },
                    body: JSON.stringify(data)
                });
            } catch(error) {
                console.error("error al enviar los datos ", error);
                alert("error al procesar la solicitud");
            }
        });

    </script>
</body>
</html>